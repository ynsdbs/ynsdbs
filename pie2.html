<!DOCTYPE html>
<html style="height: 100%">
<head>
  <meta charset="utf-8">
  <title>ECharts</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.1.2/dist/echarts.min.js"></script>
</head>
<body style="height: 100%; margin: 0">
<div id="container" style="height: 100%"></div>
<script type="text/javascript">
  var myChart=echarts.init(document.getElementById("container"))
  var colors = [
    '#e57373',
    '#f06292',
    '#ba68c8',
    '#9575cd',
    '#7986cb',
    '#64b5f6',
    '#ff8a65',
    '#ce93d8',
    '#9fa8da'
  ];
  //var bgColor = '#fff';

  var itemStyle = {
    star0: {
      color: colors[0]
    },
    star1: {
      color: colors[1]
    },
    star2: {
      color: colors[2]
    },
    star3: {
      color: colors[3]
    },
    star4: {
      color: colors[4]
    },
    star5: {
      color: colors[5]
    },
    star6: {
      color: colors[6]
    },
    star7: {
      color: colors[7]
    },
    star8: {
      color: colors[8]
    }
  };

  var data = [
    {name: '第1链',
      itemStyle: {
        normal: {
        }
      },
      children:
      // --start
        [{name: '第1链', children: [{name: '1', children: [{name: '荷玛奥'}]}]},
          {name: '第1链', children: [{name: '2', children: [{name: '杜琴丹伍'}]}]},
          {name: '第1链', children: [{name: '3', children: [{name: '貌代本伍'}]}]},
          {name: '第1链', children: [{name: '4', children: [{name: '王连生'}]}]},
          {name: '第1链', children: [{name: '5', children: [{name: '恒麻推'}]}]},
          {name: '第1链', children: [{name: '6', children: [{name: '玛伦麻薇'}]}]},
          {name: '第1链', children: [{name: '7', children: [{name: '卖恩静'}]}]},
          {name: '第1链', children: [{name: '8', children: [{name: '貌昂谬铁'}]}]},
          {name: '第1链', children: [{name: '9', children: [{name: 'AwngSanmin'}]}]},
          {name: '第1链', children: [{name: '10', children: [{name: '貌坡亚'}]}]},
          {name: '第1链', children: [{name: '11', children: [{name: '玛宁努努耐'}]}]},
          {name: '第1链', children: [{name: '12', children: [{name: '廖剑珍'}]}]},
          {name: '第1链', children: [{name: '13', children: [{name: '段生槐'}]}]},
          {name: '第1链', children: [{name: '14', children: [{name: '管国志'}]}]},
          {name: '第1链', children: [{name: '15', children: [{name: '耐耐索'}]}]},
          {name: '第1链', children: [{name: '16', children: [{name: '左腊生'}]}]},
        ]
    },
    {name: '第2链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第2链', children: [{name: '17', children: [{name: '玛宁贝漂'}]}]},
          {name: '第2链', children: [{name: '18', children: [{name: '梁礼贤'}]}]},
          {name: '第2链', children: [{name: '19', children: [{name: '徐博韬'}]}]},
          {name: '第2链', children: [{name: '20', children: [{name: '梁晨'}]}]},
          {name: '第2链', children: [{name: '21', children: [{name: '柳君鹏'}]}]},
          {name: '第2链', children: [{name: '22', children: [{name: '林龙'}]}]},
        ]
    },
    {name: '第3链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第3链', children: [{name: '23', children: [{name: '岩卯'}]}]},
          {name: '第3链', children: [{name: '24', children: [{name: '字蓉 '}]}]},
          {name: '第3链', children: [{name: '25', children: [{name: '玛丁萨温'}]}]},
          {name: '第3链', children: [{name: '26', children: [{name: '貌谬明'}]}]},
          {name: '第3链', children: [{name: '27', children: [{name: '龙彩华'}]}]},
          {name: '第3链', children: [{name: '28', children: [{name: '貌伟漂昂'}]}]},
          {name: '第3链', children: [{name: '29', children: [{name: '玛朵朵五'}]}]},
          {name: '第3链', children: [{name: '30', children: [{name: '岩良'}]}]},
          {name: '第3链', children: [{name: '31', children: [{name: '梦腊'}]}]},
          {name: '第3链', children: [{name: '32', children: [{name: '马伍'}]}]},
          {name: '第3链', children: [{name: '33', children: [{name: '吴谬明'}]}]},
          {name: '第3链', children: [{name: '34', children: [{name: '貌索林'}]}]},
          {name: '第3链', children: [{name: '35', children: [{name: '顶波'}]}]},
          {name: '第3链', children: [{name: '36', children: [{name: '吞路'}]}]},
          {name: '第3链', children: [{name: '37', children: [{name: '也门'}]}]},
          {name: '第3链', children: [{name: '38', children: [{name: '行腿奥'}]}]},
          {name: '第3链', children: [{name: '39', children: [{name: '杜敏敏'}]}]},
          {name: '第3链', children: [{name: '40', children: [{name: '杜莱'}]}]},
          {name: '第3链', children: [{name: '41', children: [{name: '貌丁林索'}]}]},
          {name: '第3链', children: [{name: '42', children: [{name: '貌孟杰昂'}]}]},
          {name: '第3链', children: [{name: '43', children: [{name: '赵玉菲'}]}]},
          {name: '第3链', children: [{name: '44', children: [{name: '貌索莫觉'}]}]},
          {name: '第3链', children: [{name: '45', children: [{name: '余菊玉'}]}]},
          {name: '第3链', children: [{name: '46', children: [{name: '特苗吞'}]}]},
          {name: '第3链', children: [{name: '47', children: [{name: '多亚迪'}]}]},
          {name: '第3链', children: [{name: '48', children: [{name: '当奈'}]}]},
          {name: '第3链', children: [{name: '49', children: [{name: '楠瑞'}]}]},
          {name: '第3链', children: [{name: '50', children: [{name: '琴美'}]}]},
          {name: '第3链', children: [{name: '51', children: [{name: '杜漂特'}]}]},
          {name: '第3链', children: [{name: '52', children: [{name: '梦丁'}]}]},
          {name: '第3链', children: [{name: '53', children: [{name: '玛卫'}]}]},
          {name: '第3链', children: [{name: '54', children: [{name: '貌凯明伍'}]}]},
          {name: '第3链', children: [{name: '55', children: [{name: '昂吞磊'}]}]},
          {name: '第3链', children: [{name: '56', children: [{name: '吉漂达'}]}]},
          {name: '第3链', children: [{name: '57', children: [{name: '陈云湘'}]}]},
          {name: '第3链', children: [{name: '58', children: [{name: '岩俩'}]}]},
          {name: '第3链', children: [{name: '59', children: [{name: '文虎'}]}]},
          {name: '第3链', children: [{name: '60', children: [{name: '梅莱'}]}]},
        ]
    },
    {name: '第4链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第4链', children: [{name: '61', children: [{name: '占喊'}]}]},
          {name: '第4链', children: [{name: '62', children: [{name: '张志南'}]}]},
          {name: '第4链', children: [{name: '63', children: [{name: '玛诶兰'}]}]},
          {name: '第4链', children: [{name: '64', children: [{name: '范文刚'}]}]},
          {name: '第4链', children: [{name: '65', children: [{name: '吕河'}]}]},

        ]
    },
    {name: '第5链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第5链', children: [{name: '93', children: [{name: '小闷'}]}]},
          {name: '第5链', children: [{name: '94', children: [{name: '排麻糯'}]}]},
          {name: '第5链', children: [{name: '95', children: [{name: '雷勒弄'}]}]},
          {name: '第5链', children: [{name: '96', children: [{name: '雷雨杰'}]}]},
          {name: '第5链', children: [{name: '97', children: [{name: '咩盛'}]}]},
          {name: '第5链', children: [{name: '98', children: [{name: '糯散'}]}]},
          {name: '第5链', children: [{name: '99', children: [{name: '内林吞'}]}]},
          {name: '第5链', children: [{name: '100', children: [{name: '张宜敏'}]}]},

        ]
    },
    {name: '第6链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第6链', children: [{name: '66', children: [{name: '春明'}]}]},
          {name: '第6链', children: [{name: '67', children: [{name: '南也静'}]}]},
          {name: '第6链', children: [{name: '68', children: [{name: '相也'}]}]},
          {name: '第6链', children: [{name: '69', children: [{name: '岳管喊'}]}]},
          {name: '第6链', children: [{name: '70', children: [{name: '赛帅'}]}]},
          {name: '第6链', children: [{name: '71', children: [{name: '左和'}]}]},

        ]
    },
    {name: '第7链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第7链', children: [{name: '72', children: [{name: '貌丹温'}]}]},
          {name: '第7链', children: [{name: '73', children: [{name: '欧彩够'}]}]},
          {name: '第7链', children: [{name: '74', children: [{name: '刘应兰'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第8链', children: [{name: '75', children: [{name: '孔老放'}]}]},
        ]
    },
    {name: '第9链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第9链', children: [{name: '75', children: [{name: '郭建军'}]}]},
          {name: '第9链', children: [{name: '76', children: [{name: '杨惠芬'}]}]},
          {name: '第9链', children: [{name: '77', children: [{name: '岩孟'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第10链', children: [{name: '78', children: [{name: '玛依依登'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第11链', children: [{name: '79', children: [{name: '叶凯晴'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第12链', children: [{name: '80', children: [{name: '李焕崃'}]}]},

        ]
    },
    {name: '第13链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第13链', children: [{name: '81', children: [{name: '陈春勤'}]}]},
          {name: '第13链', children: [{name: '82', children: [{name: '何光珍'}]}]},
          {name: '第13链', children: [{name: '83', children: [{name: '玛素咩昂昂'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第14链', children: [{name: '84', children: [{name: '李敬琴'}]}]},

        ]
    },
    {name: '第15链',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第15链', children: [{name: '85', children: [{name: '郭云威'}]}]},
          {name: '第15链', children: [{name: '86', children: [{name: '张玺'}]}]},
          {name: '第15链', children: [{name: '87', children: [{name: '林壁灿'}]}]},
          {name: '第15链', children: [{name: '88', children: [{name: '李才文'}]}]},
          {name: '第15链', children: [{name: '89', children: [{name: '岩旺依鲁'}]}]},
          {name: '第15链', children: [{name: '90', children: [{name: '张旭奎'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第16链', children: [{name: '91', children: [{name: '黄美荣'}]}]},

        ]
    },
    {name: '',
      itemStyle: {
        normal: {
        }
      },
      children:
        [{name: '第17链', children: [{name: '92', children: [{name: '卢英'}]}]},

        ]
    },
  ]

  for (var j = 0; j < data.length; ++j) {
    var level1 = data[j].children;
    for (var i = 0; i < level1.length; ++i) {
      var block = level1[i].children;
      var bookScore = [];
      var bookScoreId;
      for (var star = 0; star < block.length; ++star) {
        bookScoreId = 0;
        let currName = Number(block[star].name);
        var val = Number(currName);
        var vv = val % 7;
        var style;

        console.log('vv:', vv);
        switch (vv) {
          case 0: //'5☆':
            bookScoreId = 0;
            style = itemStyle.star0;
            break;
          case 1:
            bookScoreId = 1;
            style = itemStyle.star1;
            break;
          case 2:
            bookScoreId = 2;
            style = itemStyle.star2;
            break;
          case 3:
            bookScoreId = 3;
            style = itemStyle.star3;
            break;
          case 4: //'5☆':
            bookScoreId = 4;
            style = itemStyle.star4;
            break;
          case 5:
            bookScoreId = 5;
            style = itemStyle.star5;
            break;
          case 6:
            bookScoreId = 6;
            style = itemStyle.star6;
            break;
          case 7:
            bookScoreId = 7;
            style = itemStyle.star7;
            break;
          default:
            bookScoreId = 0;
            style = itemStyle.star5;
            break;
        }

        block[star].label = {
          color: style.color,
          downplay: {
            opacity: 0.5
          }
        };

        if (block[star].children) {
          style = {
            opacity: 1,
            color: style.color
          };
          let children = block[star].children;
          for (let index = 0; index < children.length; index++) {
            const book = children[index];
            book.value = 1;
            book.itemStyle = style;

            book.label = {
              color: style.color
            };

            var value = 1;
            if (bookScoreId === 0 || bookScoreId === 3) {
              value = 5;
            }

            if (bookScore[bookScoreId]) {
              bookScore[bookScoreId].value += value;
            } else {
              bookScore[bookScoreId] = {
                color: colors[bookScoreId],
                value: value
              };
            }
          }
        }
      }

      level1[i].itemStyle = {
        color: data[j].itemStyle.color
      };
    }
  }

  option = {
    //backgroundColor: bgColor,
    color: colors,
    series: [
      {
        type: 'sunburst',
        center: ['50%', '48%'],
        data: data,
        sort: function(a, b) {
          if (a.depth === 1) {
            return b.getValue() - a.getValue();
          } else {
            return a.dataIndex - b.dataIndex;
          }
        },
        label: {
          rotate: 'radial'
          //color: bgColor
        },
        itemStyle: {
          //borderColor: bgColor,
          borderWidth: 2
        },
        levels: [
          {},
          {
            r0: 0,
            r: '38%',
            label: {
              rotate: 0,
              fontSize: 8,
              color: '#fff'
              //fontWeight:600
            }
          },
          {
            r0: '30%',
            r: '61%',
            itemStyle: {
              //shadowBlur: 2,
              //shadowColor: colors[2],
              // color: 'transparent'
            },
            label: {
              // rotate: 'tangential',
              fontSize: 6,
              color: '#212121'
            }
          },
          {
            r0: '62%',
            r: '67%',
            itemStyle: {
              //shadowBlur: 2,
              //shadowColor: colors[2],
              color: 'transparent'
            },
            label: {
              rotate: 'tangential',
              fontSize: 8,
              color: colors[0]
            }
          },
          {
            r0: '68%',
            r: '70%',
            itemStyle: {
              //shadowBlur: 80,
              //shadowColor: colors[5]
            },
            label: {
              position: 'outside',
              //textShadowBlur: 5,
              //textShadowColor: '#333',
              fontSize: 12
            },
            downplay: {
              label: {
                opacity: 0.5
              }
            }
          }
        ]
      }
    ]
  };
  myChart.setOption(option);

</script>
</body>
</html>


